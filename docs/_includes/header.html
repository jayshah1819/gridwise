<header class="site-header" role="banner">
  <div class="wrapper">
    {%- assign default_paths = site.pages | map: "path" -%}
    {%- assign page_paths = site.header_pages | default: default_paths -%}
    <a class="site-title" rel="author" href="{{ "/" | relative_url }}">{{ site.title | escape }}</a>

    {%- if page_paths -%}
    <nav class="site-nav">
      <input type="checkbox" id="nav-trigger" class="nav-trigger" />
      <label for="nav-trigger">
        <span class="menu-icon">
          <svg viewBox="0 0 18 15" width="18px" height="15px">
            <path
              d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.484C18,14.304,17.335,14.969,16.516,14.969H1.484 C0.665,14.969,0,14.304,0,13.484l0,0C0,12.665,0.665,12,1.484,12h15.032C17.335,12,18,12.665,18,13.484L18,13.484z" />
          </svg>
        </span>
      </label>

      <div class="trigger">
        {%- for path in page_paths -%}
        {%- assign my_page = site.pages | where: "path", path | first -%}
        {%- if my_page.title and my_page.path != "docs/example.html" and my_page.path != "docs/docs.html" -%}
        <a class="page-link" href="{{ my_page.url | relative_url }}">{{ my_page.title | escape }}</a>
        {%- endif -%}
        {%- endfor -%}
        <a class="button" href="{{ "/examples-guide/" | relative_url }}">Example Docs</a>
        <div class="docs-dropdown">
          <button class="button dropdown-button" onclick="document.body.classList.toggle('docs-expanded')">
            Documentation
          </button>
          <div class="docs-menu-wrapper">
            <div class="dropdown-contents">
              <a class="dropdown-row" href="{{ "/architecture/" | relative_url }}">Architecture</a>
              <a class="dropdown-row" href="{{ "/primitive-design/" | relative_url }}">Primitive Design</a>
              <a class="dropdown-row" href="{{ "/scan-and-reduce/" | relative_url }}">Scan and Reduce</a>
              <a class="dropdown-row" href="{{ "/sort/" | relative_url }}">Sort</a>
              <a class="dropdown-row" href="{{ "/binop/" | relative_url }}">Binary Operations</a>
              <a class="dropdown-row" href="{{ "/buffer/" | relative_url }}">Buffer Management</a>
              <a class="dropdown-row" href="{{ "/timing-strategy/" | relative_url }}">Timing Strategy</a>
              <a class="dropdown-row" href="{{ "/subgroup-strategy/" | relative_url }}">Subgroup Strategy</a>
              <a class="dropdown-row" href="{{ "/builtins-strategy/" | relative_url }}">Built-ins Strategy</a>
              <a class="dropdown-row" href="{{ "/webgpu-object-caching-strategy/" | relative_url }}">WebGPU Object Caching</a>
              <a class="dropdown-row" href="{{ "/writing-a-webgpu-wgsl-workgroup-reduce-function/" | relative_url }}">Writing WGSL Reduce</a>
            </div>
          </div>
        </div>
        <div class="examples-dropdown">
          <button class="button dropdown-button" onclick="document.body.classList.toggle('examples-expanded')">
            Interactive Examples
          </button>
          <div class="dropdown-menu-wrapper">
            <div class="dropdown-contents">
             
              <a class="dropdown-row" href="{{ "/examples/scan_visualization.html" | relative_url }}" target="_blank">Scan Visualization</a>
              <a class="dropdown-row" href="{{ "/examples/sort_visualization.html" | relative_url }}" target="_blank">Sort Visualization</a>
              <a class="dropdown-row" href="{{ "/examples/reduce_visualization.html" | relative_url }}" target="_blank">Reduce Visualization</a>
               <a class="dropdown-row" href="{{ "/examples/interactive_demo.html" | relative_url }}" target="_blank">Interactive Demo </a>
            </div>
          </div>
        </div>
      </div>
    </nav>
    {%- endif -%}
  </div>
</header>

<style>
  .examples-dropdown,
  .docs-dropdown {
    position: relative;
    display: inline-block;
    vertical-align: top;
  }

  .dropdown-button {
    cursor: pointer;
    position: relative;
  }

  .dropdown-button:after {
    content: ' ▾';
    margin-left: 4px;
  }

  .dropdown-menu-wrapper,
  .docs-menu-wrapper {
    display: none;
    position: absolute;
    right: 0;
    margin-top: 10px;
    min-width: 280px;
    z-index: 1000;
    animation: dropdownFadeIn 0.3s ease-out;
  }

  @keyframes dropdownFadeIn {
    from {
      opacity: 0;
      transform: translateY(-10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  body.examples-expanded .dropdown-menu-wrapper {
    display: block;
  }

  body.docs-expanded .docs-menu-wrapper {
    display: block;
  }

  .dropdown-contents {
    background: white;
    border: 1px solid #d0d7de;
    border-radius: 12px;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12), 
                0 4px 8px rgba(0, 0, 0, 0.08),
                0 0 1px rgba(0, 0, 0, 0.08);
    overflow: hidden;
    padding: 8px 0;
    max-height: 500px;
    overflow-y: auto;
  }

  .dropdown-row {
    display: block;
    padding: 14px 24px;
    text-decoration: none;
    color: #1d1d1f;
    transition: all 0.2s ease;
    font-size: 15px;
    font-weight: 500;
    white-space: nowrap;
    position: relative;
  }

  .dropdown-row:hover {
    background: linear-gradient(90deg, #f6f8fa 0%, #ffffff 100%);
    color: #39bda7;
    padding-left: 28px;
  }

  .dropdown-row:active {
    background: #e8eaed;
  }

  .dropdown-row:not(:last-child) {
    border-bottom: 1px solid #f0f0f0;
  }

  /* Arrow indicator on hover */
  .dropdown-row:hover::before {
    content: '→';
    position: absolute;
    left: 12px;
    color: #39bda7;
    font-weight: bold;
  }

  /* Custom scrollbar for docs dropdown */
  .dropdown-contents::-webkit-scrollbar {
    width: 8px;
  }

  .dropdown-contents::-webkit-scrollbar-track {
    background: #f1f1f1;
    border-radius: 10px;
  }

  .dropdown-contents::-webkit-scrollbar-thumb {
    background: #c1c1c1;
    border-radius: 10px;
  }

  .dropdown-contents::-webkit-scrollbar-thumb:hover {
    background: #a8a8a8;
  }
</style>

<script>
  // Close dropdown when clicking outside
  document.addEventListener('click', function(event) {
    const examplesDropdown = document.querySelector('.examples-dropdown');
    const docsDropdown = document.querySelector('.docs-dropdown');
    
    if (examplesDropdown && !examplesDropdown.contains(event.target)) {
      document.body.classList.remove('examples-expanded');
    }
    
    if (docsDropdown && !docsDropdown.contains(event.target)) {
      document.body.classList.remove('docs-expanded');
    }
  });

  function launchExample() {
    window.open('https://gridwise-webgpu.github.io/gridwise/examples/scan_pane_example.html', '_blank');
  }
</script>